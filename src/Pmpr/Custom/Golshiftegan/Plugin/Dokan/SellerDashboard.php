<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             693b6045d16a1             |
    |_______________________________________|
*/
 namespace Pmpr\Custom\Golshiftegan\Plugin\Dokan; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Custom\Golshiftegan\Traits\OrderTrait; use WC_Order; class SellerDashboard extends Template { use OrderTrait; public function kgquecmsgcouyaya() { $this->cecaguuoecmccuse('dokan_get_dashboard_nav', [$this, 'usieesgwgcsgcoas'], 999)->cecaguuoecmccuse('woocommerce_admin_order_actions', [$this, 'yusueoeooyoekace'], 10, 2); parent::kgquecmsgcouyaya(); } public function wigskegsqequoeks() { $this->iqkqummseggmikgo('mark_order_as_delivered', [$this, 'ysgqwumswewuwaag'])->iqkqummseggmikgo('mark_order_as_pending-approval', [$this, 'auueossiyumkuwum']); } public function usieesgwgcsgcoas($ewuukoycimkekouc) { if (empty($ewuukoycimkekouc['orders'])) { return $ewuukoycimkekouc; } $uqgogioaacwokwmc = $this->uwkmaywceaaaigwo()->gmymsiemouuyyocw(); $yaskcikwoaweqwgy = (array) $uqgogioaacwokwmc->ioukiqsgoygcgmma($uqgogioaacwokwmc->caousskaeqikuegw()); $ssgikewsmqaeaqgu = $yaskcikwoaweqwgy[self::eykicqkowecgwewo] ?? 0; if ($ssgikewsmqaeaqgu) { $ewuukoycimkekouc['orders']['counts'] = $ssgikewsmqaeaqgu; } return $ewuukoycimkekouc; } public function yusueoeooyoekace($ccowyogiqwikkkie, $umwqusowiqmyseom) { if ($this->uwkmaywceaaaigwo()->gmymsiemouuyyocw()->giiuwsmyumqwwiyq('order_status_change', 'dokan_selling', 'on') === 'on') { unset($ccowyogiqwikkkie['processing']); unset($ccowyogiqwikkkie['complete']); if ($umwqusowiqmyseom instanceof WC_Order) { if (in_array($umwqusowiqmyseom->get_status(), ['pending', 'pending-approval', 'preparing', 'approved', 'shipped'], true)) { $ccowyogiqwikkkie['delivered'] = ['url' => $this->caokeucsksukesyo()->giiecckwoyiawoyy()->mwsmsuwkeaeymyag('admin-ajax.php?action=mark_order_as_delivered&order_id=' . $umwqusowiqmyseom->get_id(), 'dokan-mark-order-delivered'), 'name' => _x('Delivered', 'Order status', PR__CST__GOLSHIFTEGAN), 'action' => 'delivered', 'icon' => '<i class="fas fa-check">&nbsp;</i>']; } if ($umwqusowiqmyseom->get_status() === 'pending') { $ccowyogiqwikkkie['pending-approval'] = ['url' => $this->caokeucsksukesyo()->giiecckwoyiawoyy()->mwsmsuwkeaeymyag('admin-ajax.php?action=mark_order_as_pending-approval&order_id=' . $umwqusowiqmyseom->get_id(), 'dokan-mark-order-pending-approval'), 'name' => _x('Pending Approval', 'Order status', PR__CST__GOLSHIFTEGAN), 'action' => 'pending-approval', 'icon' => '<i class="far fa-clock">&nbsp;</i>']; } } } return $ccowyogiqwikkkie; } public function ysgqwumswewuwaag() { $this->mqyagewwgyksaueg('delivered'); } public function auueossiyumkuwum() { $this->mqyagewwgyksaueg('pending-approval'); } protected function mqyagewwgyksaueg($iueymcwwscwqkiyq) { if (!$this->uwkmaywceaaaigwo()->owicscwgeuqcqaig()->goecwaaykqoaaagg()) { die; } $uqgogioaacwokwmc = $this->uwkmaywceaaaigwo()->gmymsiemouuyyocw(); if (!$this->uwkmaywceaaaigwo()->issssuygyewuaswa()->scmcyesmmikkucie('dokandar') || Constants::ON !== $uqgogioaacwokwmc->giiuwsmyumqwwiyq('order_status_change', 'dokan_selling', 'on')) { $this->caokeucsksukesyo()->euekiyuksecoccus()->die(esc_html__('You do not have sufficient permissions to access this page.', 'dokan-lite')); } if (!$this->uwkmaywceaaaigwo()->giiecckwoyiawoyy()->ymwisceuuaiccayq("dokan-mark-order-{$iueymcwwscwqkiyq}")) { $this->caokeucsksukesyo()->euekiyuksecoccus()->die(esc_html__('You have taken too long. Please go back and retry.', 'dokan-lite')); } $gkkgcoiwayaccqgm = (int) $this->caokeucsksukesyo()->giiecckwoyiawoyy()->gkwaaeusmsaywikg('order_id'); if (!$gkkgcoiwayaccqgm) { die; } if (!$uqgogioaacwokwmc->qacceiuuqmiekaeo($uqgogioaacwokwmc->caousskaeqikuegw(), $gkkgcoiwayaccqgm)) { $this->caokeucsksukesyo()->euekiyuksecoccus()->die(esc_html__('You do not have permission to change this order', 'dokan-lite')); } $umwqusowiqmyseom = $this->uwkmaywceaaaigwo()->mmmcswscsiecscwg()->get($gkkgcoiwayaccqgm); $umwqusowiqmyseom->update_status($iueymcwwscwqkiyq); $this->uwkmaywceaaaigwo()->giiecckwoyiawoyy()->cquikcuwossiessu($this->uwkmaywceaaaigwo()->giiecckwoyiawoyy()->keguiwkaiweywekc()); die; } public function smuiimegiweoaeia($aaokuekaimigoyue, $qqscaoyqikuyeoaw) : ?string { $qqscaoyqikuyeoaw = ''; switch ($aaokuekaimigoyue) { case 'dashboard/orders-widget': $mumyimcwkaemyyue = $this->uwkmaywceaaaigwo()->owicscwgeuqcqaig(); $oqseeekuqisekiwy = $this->suqmweoweymuqoya(); $accwcqsesgcwmeam = $this->imkyoqyocosuqasu('completed_url'); if ($accwcqsesgcwmeam) { $gwgqcsmomamyqsmy = $this->caokeucsksukesyo()->owicscwgeuqcqaig()->imkyoqyocosuqasu($accwcqsesgcwmeam, 'seller_order_filter_nonce'); } else { $gwgqcsmomamyqsmy = $this->uwkmaywceaaaigwo()->giiecckwoyiawoyy()->ikkqcccaweckukug('seller-order-filter-nonce'); } $swiaksqemwyuceci = $this->imkyoqyocosuqasu('orders_url'); if (!$swiaksqemwyuceci) { $swiaksqemwyuceci = $this->uwkmaywceaaaigwo()->gmymsiemouuyyocw()->mwiecsoawewcsuim('orders'); } $qmiikaqgmyueqycc = $this->imkyoqyocosuqasu('orders_count'); foreach ($oqseeekuqisekiwy as $iueymcwwscwqkiyq => $icwicymcioeyeyek) { $oqseeekuqisekiwy[$iueymcwwscwqkiyq][Constants::auqoykcmsiauccao] = $mumyimcwkaemyyue->yqymaqmqiqmmmsoo(['order_status' => $iueymcwwscwqkiyq, 'seller_order_filter_nonce' => $gwgqcsmomamyqsmy], $swiaksqemwyuceci); $oqseeekuqisekiwy[$iueymcwwscwqkiyq][Constants::ciyoccqkiamemcmm] = $qmiikaqgmyueqycc->{$iueymcwwscwqkiyq} ?? 0; } $this->iioeimqcocgciyuu(['statuses' => $oqseeekuqisekiwy]); $qqscaoyqikuyeoaw = $this->kasioquywmeosmsi(Constants::PHP)->iuekyyeesukysksy($this, 'dashboard/orders-widget.php', $qqscaoyqikuyeoaw); break; } return $qqscaoyqikuyeoaw; } }
